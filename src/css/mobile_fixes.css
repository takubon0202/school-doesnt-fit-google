/* ==========================================================================
   Mobile Layout Fixes (Added for Anti-Gravity Mobile Optimization)
   ========================================================================== */

@media (max-width: 767px) {

    /* 1. Scale down variables for mobile */
    :root {
        --spacing-lg: 1.5rem;
        --spacing-xl: 3rem;
        --spacing-2xl: 3rem;
        /* Drastically reduced from 8rem */
        --font-size-4xl: 2rem;
        --font-size-3xl: 1.75rem;
        --font-size-2xl: 1.5rem;
        --container-max-width: 100%;
    }

    /* 2. Container & Body Safety */
    body,
    html {
        overflow-x: hidden;
        width: 100%;
    }

    .container {
        padding: 0 1rem;
        /* Standard 16px padding */
        width: 100%;
        max-width: 100vw;
    }

    /* 3. Grid & Flex Resets (Force 1 column) */
    .hero__inner,
    .about__grid,
    .author__grid,
    .turning-points,
    .testimonials__grid,
    .message-v2__core-grid,
    .ifjuku__features,
    .preview__chapters {
        display: flex !important;
        flex-direction: column !important;
        gap: 2rem;
    }

    /* 4. Timeline Mobile Fix */
    .timeline {
        padding-left: 0;
        /* Remove huge padding */
        margin-left: 0;
    }

    /* Adjust the line position for mobile */
    .timeline::before {
        left: 12px;
    }

    /* Adjust markers */
    .timeline__marker {
        left: 2px;
        width: 16px;
        height: 16px;
        border-width: 3px;
    }

    /* Adjust content to sit right of the line */
    .timeline__content {
        padding-left: 3rem;
        /* Space for line and marker */
    }

    .timeline__image-wrapper {
        max-width: 100%;
        /* Allow full width images on mobile timeline */
        width: 100%;
        margin: 0 0 1rem 0;
    }

    /* 5. Component Padding Reduction */
    .card,
    .about__card,
    .turning-point,
    .testimonial,
    .message-v2__panel-inner,
    .author__card,
    .toc__item {
        padding: 1.5rem;
    }

    /* 6. Typography & Hero */
    .hero {
        padding-top: 100px;
        height: auto;
        min-height: auto;
        padding-bottom: 4rem;
    }

    .hero__title {
        font-size: 2rem;
        word-break: break-word;
        /* Prevent text overflow */
    }

    .hero__book-wrapper {
        max-width: 200px;
        /* Resize book for mobile */
        margin: 0 auto;
    }

    .section-title {
        font-size: 1.75rem;
        word-break: break-word;
    }

    /* 7. Message Tabs & Panels */
    .message-v2__tabs {
        flex-direction: column;
        gap: 1rem;
    }

    .message-v2__tab {
        width: 100%;
        padding: 1rem;
        justify-content: flex-start;
    }

    .message-v2__panel-wrapper {
        margin-bottom: 2rem;
    }

    /* 8. Hide disruptive backgrounds */
    .hero::before,
    .hero::after {
        opacity: 0.3;
        /* Dim them instead of hiding, or hide if causing scroll */
        transform: scale(0.5);
        /* Shrink them */
    }
}